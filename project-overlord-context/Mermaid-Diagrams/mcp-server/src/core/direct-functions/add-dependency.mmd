flowchart TD
    subgraph "add-dependency.js"
        A["ğŸ”— Add Dependency Direct"] --> B["Import Dependencies"]
        B --> C["Function Definition"]
        C --> D["Parameter Validation"]
        D --> E["Core Function Call"]
        E --> F["Response Formatting"]
        
        subgraph "Imports"
            I1["addDependency from '../../../../scripts/modules/dependency-manager.js'"]
            I2["enableSilentMode from '../../../../scripts/modules/utils.js'"]
            I3["disableSilentMode from '../../../../scripts/modules/utils.js'"]
        end
        
        subgraph "Functions"
            F1["addDependencyDirect(args, log) - async"]
        end
        
        subgraph "Parameters"
            P1["tasksJsonPath - string"]
            P2["id - string|number"]
            P3["dependsOn - string|number"]
            P4["tag - string (optional)"]
            P5["projectRoot - string"]
        end
        
        subgraph "Validation Logic"
            V1["Check tasksJsonPath exists"]
            V2["Validate id parameter"]
            V3["Validate dependsOn parameter"]
            V4["Format IDs for core function"]
        end
        
        subgraph "Execution Flow"
            EX1["Enable silent mode"]
            EX2["Create context object"]
            EX3["Call addDependency core function"]
            EX4["Disable silent mode"]
            EX5["Return success response"]
        end
        
        subgraph "Error Handling"
            ERR1["Missing argument errors"]
            ERR2["Input validation errors"]
            ERR3["Core function errors"]
            ERR4["Always restore logging"]
        end
        
        subgraph "Exports"
            EXP1["addDependencyDirect function"]
        end
        
        B --> I1
        B --> I2
        B --> I3
        C --> F1
        F1 --> P1
        F1 --> P2
        F1 --> P3
        F1 --> P4
        F1 --> P5
        D --> V1
        D --> V2
        D --> V3
        D --> V4
        E --> EX1
        E --> EX2
        E --> EX3
        E --> EX4
        F --> EX5
        V1 --> ERR1
        V2 --> ERR2
        V3 --> ERR2
        EX3 --> ERR3
        ERR3 --> ERR4
        F --> EXP1
    end