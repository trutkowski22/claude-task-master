flowchart TB
    subgraph "Imports"
        I1["expandAllTasks - from G:\claude-task-master\claude-task-master\scripts\modules\task-manager.js"]
        I2["enableSilentMode, disableSilentMode - from G:\claude-task-master\claude-task-master\scripts\modules\utils.js"]
        I3["createLogWrapper - from ../../tools/utils.js"]
    end

    subgraph "Functions Defined"
        FU1["expandAllTasksDirect(args, log, context) - Wrapper function that expands all pending tasks with subtasks using AI assistance"]
    end

    subgraph "Exports"
        E1["expandAllTasksDirect - Direct function wrapper for batch task expansion operations"]
    end

    subgraph "Parameters"
        P1["args.tasksJsonPath - Explicit path to the tasks.json file (required string)"]
        P2["args.num - Number of subtasks to generate (optional number/string)"]
        P3["args.research - Enable research-backed subtask generation (optional boolean)"]
        P4["args.prompt - Additional context to guide subtask generation (optional string)"]
        P5["args.force - Force regeneration of subtasks for tasks that already have them (optional boolean)"]
        P6["args.projectRoot - Project root path (optional string)"]
        P7["args.tag - Tag for the task context (optional string)"]
        P8["log - Logger object from FastMCP for recording operations"]
        P9["context - Context object containing session information"]
    end

    subgraph "Execution Flow"
        FL1["Extract session and parameters from context and args"]
        FL2["Create logger wrapper for MCP compatibility"]
        FL3["Validate required tasksJsonPath parameter"]
        FL4["Enable silent mode for core function execution"]
        FL5["Parse and validate parameters with proper type conversion"]
        FL6["Call core expandAllTasks function with all options"]
        FL7["Process aggregated results and telemetry data"]
        FL8["Return success response with expansion statistics"]
        FL9["Handle errors and ensure silent mode is disabled in finally block"]
    end

    FL1 --> FL2
    FL2 --> FL3
    FL3 --> FL4
    FL4 --> FL5
    FL5 --> FL6
    FL6 --> FL7
    FL7 --> FL8
    FL8 --> FL9