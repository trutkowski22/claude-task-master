flowchart TB
    subgraph Imports["Imports"]
        I1["IMPORT: program, FROM: commander"]
        I2["IMPORT: path, FROM: path"]
        I3["IMPORT: chalk, FROM: chalk"]
        I4["IMPORT: boxen, FROM: boxen"]
        I5["IMPORT: fs, FROM: fs"]
        I6["IMPORT: https, FROM: https"]
        I7["IMPORT: inquirer, FROM: inquirer"]
        I8["IMPORT: ora, FROM: ora"]
        I9["IMPORT: log, FROM: /claude-task-master/scripts/modules/utils.js"]
        I10["IMPORT: parsePRD, FROM: /claude-task-master/scripts/modules/task-manager.js"]
        I11["IMPORT: createTag, FROM: /claude-task-master/scripts/modules/task-manager/tag-management.js"]
        I12["IMPORT: addDependency, FROM: /claude-task-master/scripts/modules/dependency-manager.js"]
        I13["IMPORT: isApiKeySet, FROM: /claude-task-master/scripts/modules/config-manager.js"]
        I14["IMPORT: CUSTOM_PROVIDERS, FROM: /claude-task-master/src/constants/providers.js"]
        I15["IMPORT: COMPLEXITY_REPORT_FILE, FROM: /claude-task-master/src/constants/paths.js"]
        I16["IMPORT: initTaskMaster, FROM: /claude-task-master/src/task-master.js"]
        I17["IMPORT: displayBanner, FROM: /claude-task-master/scripts/modules/ui.js"]
        I18["IMPORT: confirmProfilesRemove, FROM: /claude-task-master/src/ui/confirm.js"]
        I19["IMPORT: initializeProject, FROM: /claude-task-master/scripts/init.js"]
        I20["IMPORT: getModelConfiguration, FROM: /claude-task-master/scripts/modules/task-manager/models.js"]
    end
    
    subgraph Dependencies["Dependencies"]
        D1["DEP: Commander.js CLI framework"]
        D2["DEP: Terminal UI and styling libraries"]
        D3["DEP: File system operations"]
        D4["DEP: HTTP/HTTPS for API communication"]
        D5["DEP: Interactive prompt system"]
        D6["DEP: Task management business logic modules"]
    end
    
    subgraph FunctionsDefined["Functions Defined"]
        FU1["FUNCTION: runInteractiveSetup"]
        FU2["FUNCTION: registerCommands"]
        FU3["FUNCTION: setupCLI"]
        FU4["FUNCTION: checkForUpdate"]
        FU5["FUNCTION: compareVersions"]
        FU6["FUNCTION: displayUpgradeNotification"]
        FU7["FUNCTION: runCLI"]
        FU8["FUNCTION: resolveComplexityReportPath"]
    end
    
    subgraph Exports["Exports"]
        E1["EXP: registerCommands"]
        E2["EXP: setupCLI"]
        E3["EXP: runCLI"]
        E4["EXP: checkForUpdate"]
        E5["EXP: compareVersions"]
        E6["EXP: displayUpgradeNotification"]
        E7["EXP: resolveComplexityReportPath"]
    end
    
    subgraph Parameters["Parameters"]
        P1["PARAM: {string|null} projectRoot - The resolved project root directory"]
        P2["PARAM: {Object} programInstance - Commander program instance for command registration"]
        P3["PARAM: {Array} argv - Command line arguments array"]
        P4["PARAM: {string} output - Output path for complexity report"]
        P5["PARAM: {string} tag - Tag context for report generation"]
    end
    
    subgraph Constants["Const Declarations"]
        C1["CONST: currentConfigResult, VALUE: result from model configuration loading"]
        C2["CONST: currentModels, VALUE: active AI models configuration"]
        C3["CONST: cancelOption, VALUE: cancel option for interactive prompts"]
        C4["CONST: noChangeOption, VALUE: no change option for model selection"]
        C5["CONST: program, VALUE: configured Commander.js program instance"]
    end
    
    subgraph ExecutionFlow["Execution Flow"]
        FL1["Parse and validate command line arguments using Commander.js"]
        FL2["Register all available CLI commands with their options and handlers"]
        FL3["Set up interactive model configuration and API key management"]
        FL4["Handle command execution with proper error handling and validation"]
        FL5["Provide interactive setup for model selection with external API calls"]
        FL6["Manage project initialization and configuration file creation"]
        FL7["Check for software updates and notify users"]
        FL8["Route commands to appropriate task management functions"]
        FL9["Handle tag-aware file path resolution and context management"]
        FL10["Display formatted output and user guidance messages"]
    end
    
    subgraph commandsJS["commands.js"]
        Imports
        Dependencies
        FunctionsDefined
        Exports
        Parameters
        Constants
        ExecutionFlow
    end
    
    FL1 --> FL2
    FL2 --> FL3
    FL3 --> FL4
    FL4 --> FL5
    FL5 --> FL6
    FL6 --> FL7
    FL7 --> FL8
    FL8 --> FL9
    FL9 --> FL10